<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Painel Administrativo - PAC칈FICOS BET</title>

<style>
body{
    margin:0;
    font-family:Arial;
    background:#0b0b1c;
    color:white;
}
.container{display:flex;}
.menu{
    width:260px;
    background:#000;
    height:100vh;
    padding:20px;
}
.menu h2{color:#ffcc00;text-align:center;}
.menu button{
    width:100%;
    padding:12px;
    margin-top:8px;
    border:none;
    border-radius:6px;
    cursor:pointer;
    font-weight:bold;
    background:#1b1b3a;
    color:white;
}
.menu button:hover{background:#ffcc00;color:black;}
.logout{background:red !important;}

.content{flex:1;padding:20px;}

table{
    width:100%;
    border-collapse:collapse;
    margin-top:15px;
}
th,td{
    border:1px solid #555;
    padding:8px;
    text-align:center;
}
th{
    background:#ffcc00;
    color:black;
}

.page{display:none;}
.page.active{display:block;}

.btn{
    padding:6px 10px;
    border:none;
    border-radius:6px;
    cursor:pointer;
    font-weight:bold;
}
.aprovar{background:#2ecc71;color:white;}
.aprovar:hover{background:#1e9e57;}
.excluir{background:#e74c3c;color:white;}
.excluir:hover{background:#b93225;}
</style>
</head>

<body>

<div class="container">

<div class="menu">
<h2>游 ADMIN</h2>
<button onclick="showPage('dashboard')">游늵 Dashboard</button>
<button onclick="showPage('usuarios')">游논 Usu치rios</button>
<button onclick="showPage('financeiro')">游눯 Dep칩sitos</button>
<button onclick="sair()" class="logout">游뛁 Sair</button>
</div>

<div class="content">

<!-- DASHBOARD -->
<div id="dashboard" class="page active">
<h1>游늵 Dashboard</h1>
<p>Total de usu치rios: <b id="totalUsuarios">0</b></p>
<p>Saldo total do sistema: <b>R$ <span id="somaSaldo">0,00</span></b></p>
</div>

<!-- USU츼RIOS -->
<div id="usuarios" class="page">
<h1>游논 Usu치rios</h1>
<table id="tabelaUsuarios">
<tr>
<th>Nome</th>
<th>Email</th>
<th>Saldo</th>
</tr>
</table>
</div>

<!-- FINANCEIRO -->
<div id="financeiro" class="page">
<h1>游눯 Dep칩sitos Pendentes</h1>
<table id="tabelaDepositos">
<tr>
<th>Nome</th>
<th>Email</th>
<th>Valor</th>
<th>CPF</th>
<th>Status</th>
<th>A칞칫es</th>
</tr>
</table>
</div>

</div>
</div>

<script>
// ===== PROTE칂츾O ADMIN =====
let logado = localStorage.getItem("logged");
let admin = JSON.parse(localStorage.getItem("usuarioLogado"));
let emailAdmin = "mariaepr1702@gmail.com";

if(logado !== "true" || !admin || admin.email !== emailAdmin){
    alert("Acesso negado");
    window.location.href="index.html";
}

// ===== NAVEGA칂츾O =====
function showPage(id){
    document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
    document.getElementById(id).classList.add("active");
}

// ===== USU츼RIOS =====
let usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];
document.getElementById("totalUsuarios").innerText = usuarios.length;

let tabelaU = document.getElementById("tabelaUsuarios");
let soma = 0;

usuarios.forEach(u=>{
    let saldo = Number(u.saldo || 0);
    soma += saldo;
    let tr = document.createElement("tr");
    tr.innerHTML = `
        <td>${u.nome}</td>
        <td>${u.email}</td>
        <td>R$ ${saldo.toFixed(2)}</td>
    `;
    tabelaU.appendChild(tr);
});
document.getElementById("somaSaldo").innerText = soma.toFixed(2);

// ===== DEP칍SITOS =====
let depositos = JSON.parse(localStorage.getItem("depositos")) || [];
let tabelaD = document.getElementById("tabelaDepositos");
renderDepositos();

function renderDepositos(){
    tabelaD.innerHTML = `
    <tr>
        <th>Nome</th>
        <th>Email</th>
        <th>Valor</th>
        <th>CPF</th>
        <th>Status</th>
        <th>A칞칫es</th>
    </tr>`;

    if(depositos.length === 0){
        tabelaD.innerHTML += `<tr><td colspan="6">Nenhum dep칩sito</td></tr>`;
        return;
    }

    depositos.forEach((d,i)=>{
        let tr = document.createElement("tr");
        tr.innerHTML = `
        <td>${d.nome}</td>
        <td>${d.email}</td>
        <td>R$ ${Number(d.valor).toFixed(2)}</td>
        <td>${d.cpf}</td>
        <td>${d.status}</td>
        <td>
            ${d.status==="Pendente" ? `
            <button class="btn aprovar" onclick="aprovar(${i})">Aprovar</button>
            <button class="btn excluir" onclick="rejeitar(${i})">Excluir</button>
            ` : "-"}
        </td>`;
        tabelaD.appendChild(tr);
    });
}

function aprovar(i){
    let dep = depositos[i];
    let user = usuarios.find(u=>u.email===dep.email);
    if(!user){
        alert("Usu치rio n칚o encontrado");
        return;
    }

    user.saldo = Number(user.saldo||0) + Number(dep.valor);
    dep.status = "Aprovado";

    localStorage.setItem("usuarios", JSON.stringify(usuarios));
    localStorage.setItem("depositos", JSON.stringify(depositos));

    alert("Dep칩sito aprovado!");
    location.reload();
}

function rejeitar(i){
    if(!confirm("Deseja excluir este dep칩sito?")) return;
    depositos.splice(i,1);
    localStorage.setItem("depositos", JSON.stringify(depositos));
    alert("Dep칩sito exclu칤do");
    renderDepositos();
}

// ===== SAIR =====
function sair(){
    localStorage.clear();
    window.location.href="login.html";
}
</script>

</body>
</html>
