<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Painel Administrativo - PAC칈FICOS BET</title>

<style>
body{
    margin:0;
    font-family:Arial;
    background:#0b0b1c;
    color:white;
}

.container{
    display:flex;
}

/* MENU LATERAL */
.menu{
    width:260px;
    background:#000;
    height:100vh;
    padding:20px;
}

.menu h2{
    color:#ffcc00;
    text-align:center;
}

.menu button{
    width:100%;
    padding:12px;
    margin-top:8px;
    border:none;
    border-radius:6px;
    cursor:pointer;
    font-weight:bold;
    background:#1b1b3a;
    color:white;
}

.menu button:hover{
    background:#ffcc00;
    color:black;
}

.logout{
    background:red !important;
}

/* CONTE칔DO */
.content{
    flex:1;
    padding:20px;
}

/* TABELAS */
table{
    width:100%;
    border-collapse:collapse;
    margin-top:15px;
}

th,td{
    border:1px solid #555;
    padding:8px;
    text-align:center;
}

th{
    background:#ffcc00;
    color:black;
}

.page{
    display:none;
}

.page.active{
    display:block;
}

/* BOT츾O */
.btn{
    padding:6px 10px;
    border:none;
    border-radius:6px;
    cursor:pointer;
    font-weight:bold;
}

.aprovar{
    background:#2ecc71;
    color:white;
}

.aprovar:hover{
    background:#1b8f4d;
}
</style>
</head>

<body>

<div class="container">

    <div class="menu">
        <h2>游 ADMIN</h2>

        <button onclick="showPage('dashboard')">游늵 Dashboard</button>
        <button onclick="showPage('usuarios')">游논 Gerenciar Usu치rios</button>
        <button onclick="showPage('financeiro')">游눯 Financeiro</button>
        <button onclick="showPage('config')">丘뙖잺 Configura칞칫es</button>
        <button onclick="sair()" class="logout">游뛁 Sair</button>
    </div>

    <div class="content">

        <!-- DASHBOARD -->
        <div id="dashboard" class="page active">
            <h1>游늵 Dashboard Administrativo</h1>

            <p>Total de usu치rios: <span id="totalUsuarios">0</span></p>
            <p>Saldo total do sistema: R$ <span id="somaSaldo">0,00</span></p>
        </div>

        <!-- USU츼RIOS -->
        <div id="usuarios" class="page">
            <h1>游논 Lista de Usu치rios</h1>

            <table id="tabelaUsuarios">
                <tr>
                    <th>Nome</th>
                    <th>Email</th>
                    <th>Saldo</th>
                </tr>
            </table>
        </div>

        <!-- FINANCEIRO -->
        <div id="financeiro" class="page">
            <h1>游눯 Dep칩sitos Pendentes</h1>

            <table id="tabelaDepositos">
                <tr>
                    <th>Usu치rio</th>
                    <th>Email</th>
                    <th>Valor</th>
                    <th>Data</th>
                    <th>A칞칚o</th>
                </tr>
            </table>
        </div>

        <!-- CONFIG -->
        <div id="config" class="page">
            <h1>丘뙖잺 Configura칞칫es</h1>
            <p>Aqui depois vamos colocar ajustes do sistema.</p>
        </div>

    </div>
</div>

<script>
// PROTE칂츾O
let logado = localStorage.getItem("logged");
let usuario = JSON.parse(localStorage.getItem("usuarioLogado"));
let emailAdmin = "mariaepr1702@gmail.com";

if(logado !== "true" || !usuario || usuario.email !== emailAdmin){
    alert("Acesso negado!");
    window.location.href = "index.html";
}

// TROCAR P츼GINA
function showPage(id){
    document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
    document.getElementById(id).classList.add("active");
}

/* ===== CARREGAR USU츼RIOS ===== */
let usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];
document.getElementById("totalUsuarios").innerText = usuarios.length;

let tabela = document.getElementById("tabelaUsuarios");
let soma = 0;

usuarios.forEach(u=>{
    let saldo = Number(u.saldo || 0);
    soma += saldo;

    let tr = document.createElement("tr");
    tr.innerHTML = `
        <td>${u.nome}</td>
        <td>${u.email}</td>
        <td>R$ ${saldo.toFixed(2)}</td>
    `;
    tabela.appendChild(tr);
});

document.getElementById("somaSaldo").innerText = soma.toFixed(2);

/* ===== DEP칍SITOS PENDENTES ===== */
let depositosPendentes = JSON.parse(localStorage.getItem("depositosPendentes")) || [];
let tabelaDep = document.getElementById("tabelaDepositos");
renderDepositos();

function renderDepositos(){
    tabelaDep.innerHTML = `
        <tr>
            <th>Usu치rio</th>
            <th>Email</th>
            <th>Valor</th>
            <th>Data</th>
            <th>A칞칚o</th>
        </tr>
    `;

    if(depositosPendentes.length === 0){
        let tr = document.createElement("tr");
        tr.innerHTML = `<td colspan="5">Nenhum dep칩sito pendente</td>`;
        tabelaDep.appendChild(tr);
        return;
    }

    depositosPendentes.forEach((d,i)=>{
        let tr = document.createElement("tr");
        tr.innerHTML = `
            <td>${d.nome}</td>
            <td>${d.email}</td>
            <td>R$ ${Number(d.valor).toFixed(2)}</td>
            <td>${d.data}</td>
            <td>
                <button class="btn aprovar" onclick="aprovar(${i})">Aprovar</button>
            </td>
        `;
        tabelaDep.appendChild(tr);
    });
}

function aprovar(index){
    let dep = depositosPendentes[index];

    // achar usu치rio
    let user = usuarios.find(u => u.email === dep.email);
    if(!user){
        alert("Usu치rio n칚o encontrado, n칚o foi poss칤vel creditar.");
        return;
    }

    user.saldo = Number(user.saldo || 0) + Number(dep.valor);

    // salvar atualiza칞칚o
    localStorage.setItem("usuarios", JSON.stringify(usuarios));

    // remover da fila
    depositosPendentes.splice(index,1);
    localStorage.setItem("depositosPendentes", JSON.stringify(depositosPendentes));

    alert("Dep칩sito aprovado com sucesso!");

    renderDepositos();
    location.reload();
}

// SAIR
function sair(){
    localStorage.removeItem("logged");
    localStorage.removeItem("usuarioLogado");
    window.location.href = "login.html";
}
</script>

</body>
</html>
