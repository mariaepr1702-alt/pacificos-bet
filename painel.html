<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Painel do Usu谩rio - PACFICOS BET</title>

<style>
body{
    margin:0;
    font-family: Arial;
    background:#0b0b1c;
    color:white;
}
.container{display:flex;}
.menu{
    width:260px;
    background:#000;
    height:100vh;
    padding:20px;
}
.menu h2{color:#ffcc00;text-align:center;}
.menu button{
    width:100%;
    padding:12px;
    margin-top:8px;
    border:none;
    border-radius:6px;
    cursor:pointer;
    font-weight:bold;
    background:#1b1b3a;
    color:white;
}
.menu button:hover{background:#ffcc00;color:black;}
.logout{background:red !important;}
.content{flex:1;padding:20px;}

.card{
    background:white;
    color:black;
    padding:20px;
    border-radius:10px;
    width:240px;
}
.cards{display:flex;gap:15px;flex-wrap:wrap;}

table{width:100%;border-collapse:collapse;margin-top:15px;}
th,td{border:1px solid #555;padding:8px;text-align:center;}
th{background:#ffcc00;color:black;}

.page{display:none;}
.page.active{display:block;}

.action{
    background:#ffcc00;
    border:none;
    padding:8px 14px;
    border-radius:8px;
    cursor:pointer;
    font-weight:bold;
    margin-top:6px;
}

.modal{
    position:fixed;
    inset:0;
    background:#000000c7;
    display:none;
    justify-content:center;
    align-items:center;
}
.modal-content{
    background:white;
    color:black;
    padding:20px;
    border-radius:10px;
    width:320px;
    text-align:center;
}
.modal-content input{
    width:90%;
    padding:8px;
    margin-top:8px;
}
textarea{
    width:90%;
    height:90px;
    resize:none;
}
</style>
</head>

<body>

<div class="container">

<div class="menu">
<h2> PACFICOS BET</h2>
<button onclick="showPage('dashboard')"> Dashboard</button>
<button onclick="showPage('carteira')"> Carteira</button>
<button onclick="showPage('perfil')"> Perfil</button>
<button onclick="sair()" class="logout"> Sair</button>
</div>

<div class="content">

<!-- DASHBOARD -->
<div id="dashboard" class="page active">
<h2 id="nomeUsuario"></h2>

<div class="cards">
<div class="card">
<h3>Saldo</h3>
<p id="saldo">R$ 0,00</p>
<button class="action" onclick="abrirDeposito()">Depositar</button>
</div>
</div>
</div>

<!-- CARTEIRA -->
<div id="carteira" class="page">
<h2>Hist贸rico</h2>
<table>
<thead>
<tr>
<th>Tipo</th>
<th>Valor</th>
<th>Status</th>
</tr>
</thead>
<tbody id="historicoTabela">
<tr><td colspan="3">Nenhuma movimenta莽茫o</td></tr>
</tbody>
</table>
</div>

<!-- PERFIL -->
<div id="perfil" class="page">
<p><b>Nome:</b> <span id="perfilNome"></span></p>
<p><b>Email:</b> <span id="perfilEmail"></span></p>
</div>

</div>
</div>

<!-- MODAL DEPSITO -->
<div class="modal" id="modalDeposito">
<div class="modal-content">

<h3>Dep贸sito via PIX</h3>

<input type="number" id="valorDeposito" placeholder="Valor">
<input type="text" id="cpfDeposito" placeholder="CPF do pagador">

<hr>

<p><b>Escaneie o QR Code:</b></p>
<img src="pix_qr.jpg.jpg" width="180">

<p><b>Ou copie o c贸digo PIX:</b></p>

<textarea id="codigoPix" readonly>
00020126580014br.gov.bcb.pix013662b11a05-7d55-4f8b-93f2-6682a24b9b7b27600016BR.COM.PAGSEGURO013634D0550D-AFF5-443C-9FF0-60DAB1B02EF45204581253039865802BR5925Maria Eduarda Poleza Rosa6008Blumenau62290525PAGS00000000026010921189563045D9D
</textarea>

<button class="action" onclick="copiarPix()"> Copiar c贸digo PIX</button>

<br><br>

<button class="action" onclick="confirmarDeposito()">J谩 fiz o PIX</button>
<button onclick="fecharDeposito()">Cancelar</button>

</div>
</div>

<script>
if(localStorage.getItem("logged")!=="true"){
    window.location.href="login.html";
}

let usuario = JSON.parse(localStorage.getItem("usuarioLogado"));
document.getElementById("nomeUsuario").innerText = usuario.nome;
document.getElementById("perfilNome").innerText = usuario.nome;
document.getElementById("perfilEmail").innerText = usuario.email;

let saldo = parseFloat(usuario.saldo || 0);
document.getElementById("saldo").innerText = "R$ " + saldo.toFixed(2);

let historico = JSON.parse(localStorage.getItem("historico")) || [];

function showPage(id){
    document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
    document.getElementById(id).classList.add("active");
}

function abrirDeposito(){
    document.getElementById("modalDeposito").style.display="flex";
}
function fecharDeposito(){
    document.getElementById("modalDeposito").style.display="none";
}

/* COPIAR PIX */
function copiarPix(){
    const texto = document.getElementById("codigoPix");
    texto.select();
    texto.setSelectionRange(0, 99999);
    document.execCommand("copy");
    alert("C贸digo PIX copiado! Agora 茅 s贸 colar no app do banco ");
}

function confirmarDeposito(){
    let valor = document.getElementById("valorDeposito").value;
    let cpf = document.getElementById("cpfDeposito").value;

    if(!valor || !cpf){
        alert("Preencha todos os campos");
        return;
    }

    let depositos = JSON.parse(localStorage.getItem("depositos")) || [];

    depositos.push({
        email: usuario.email,
        nome: usuario.nome,
        valor: Number(valor),
        cpf: cpf,
        status: "Pendente"
    });

    localStorage.setItem("depositos", JSON.stringify(depositos));

    historico.push({
        tipo:"Dep贸sito",
        valor:Number(valor),
        status:"Pendente"
    });

    localStorage.setItem("historico", JSON.stringify(historico));

    carregarHistorico();
    fecharDeposito();
    alert("Dep贸sito enviado para an谩lise!");
}

function carregarHistorico(){
    let tabela = document.getElementById("historicoTabela");
    tabela.innerHTML="";
    if(historico.length===0){
        tabela.innerHTML="<tr><td colspan='3'>Nenhuma movimenta莽茫o</td></tr>";
        return;
    }
    historico.forEach(h=>{
        let tr=document.createElement("tr");
        tr.innerHTML=`
        <td>${h.tipo}</td>
        <td>R$ ${h.valor.toFixed(2)}</td>
        <td>${h.status}</td>`;
        tabela.appendChild(tr);
    });
}

function sair(){
    localStorage.clear();
    window.location.href="login.html";
}

carregarHistorico();
</script>

</body>
</html>
